# =============================================================================
# push-to-synology.conf — configuration for push-to-synology.py
#
# Placed at:  /opt/cert-push/push-to-synology.conf
# Ownership:  root:root
# Mode:       600  (chmod 600 /opt/cert-push/push-to-synology.conf)
#
# NEVER commit this file to version control.
# =============================================================================

# --- Synology DSM connection ---
SYNO_HOST=192.168.0.5
SYNO_PORT=5001

# --- DSM credentials (dedicated cert-updater admin account) ---
SYNO_USER=certupdater
SYNO_PASS=REPLACE_WITH_STRONG_PASSWORD

# --- Certificate identification ---
# Must match the description shown in DSM → Control Panel → Security → Certificate
SYNO_CERT_DESC=my.hostname.com

# --- Path to the NPM letsencrypt volume on this host ---
# This is the host-side mount of /etc/letsencrypt inside the NPM container
NPM_LETSENCRYPT_PATH=/var/lib/docker/volumes/npm_letsencrypt/_data

# Path prefix that certbot uses *inside* the container
# (certbot writes this into the flag file as RENEWED_LINEAGE)
CONTAINER_LETSENCRYPT_PATH=/etc/letsencrypt

# --- Flag file ---
# Written by the deploy hook inside the container (via /etc/letsencrypt → npm_letsencrypt volume)
# Read and deleted by this script
FLAG_FILE=/var/lib/docker/volumes/npm_letsencrypt/_data/.cert-renewed

# --- Logging ---
LOG_FILE=/opt/cert-push/push-to-synology.log
